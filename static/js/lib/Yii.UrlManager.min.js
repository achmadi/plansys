(function () {

    var phpJS = function() {

    };

    phpJS.prototype.krsort = function (inputArr, sort_flags) {
        // http://kevin.vanzonneveld.net
        // +   original by: GeekFG (http://geekfg.blogspot.com)
        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
        // +   improved by: Brett Zamir (http://brett-zamir.me)
        // %          note 1: The examples are correct, this is a new way
        // %        note 2: This function deviates from PHP in returning a copy of the array instead
        // %        note 2: of acting by reference and returning true; this was necessary because
        // %        note 2: IE does not allow deleting and re-adding of properties without caching
        // %        note 2: of property position; you can set the ini of "phpjs.strictForIn" to true to
        // %        note 2: get the PHP behavior, but use this only if you are in an environment
        // %        note 2: such as Firefox extensions where for-in iteration order is fixed and true
        // %        note 2: property deletion is supported. Note that we intend to implement the PHP
        // %        note 2: behavior by default if IE ever does allow it; only gives shallow copy since
        // %        note 2: is by reference in PHP anyways
        // %        note 3: Since JS objects' keys are always strings, and (the
        // %        note 3: default) SORT_REGULAR flag distinguishes by key type,
        // %        note 3: if the content is a numeric string, we treat the
        // %        note 3: "original type" as numeric.
        // -    depends on: i18n_loc_get_default
        // *     example 1: data = {d: 'lemon', a: 'orange', b: 'banana', c: 'apple'};
        // *     example 1: data = krsort(data);
        // *     results 1: {d: 'lemon', c: 'apple', b: 'banana', a: 'orange'}
        // *     example 2: ini_set('phpjs.strictForIn', true);
        // *     example 2: data = {2: 'van', 3: 'Zonneveld', 1: 'Kevin'};
        // *     example 2: krsort(data);
        // *     results 2: data == {3: 'Kevin', 2: 'van', 1: 'Zonneveld'}
        // *     returns 2: true
        var tmp_arr = {},
            keys = [],
            sorter, i, k, that = this,
            strictForIn = false,
            populateArr = {};

        switch (sort_flags) {
            case 'SORT_STRING':
                // compare items as strings
                sorter = function (a, b) {
                    return that.strnatcmp(b, a);
                };
                break;
            case 'SORT_LOCALE_STRING':
                // compare items as strings, based on the current locale (set with  i18n_loc_set_default() as of PHP6)
                var loc = this.i18n_loc_get_default();
                sorter = this.php_js.i18nLocales[loc].sorting;
                break;
            case 'SORT_NUMERIC':
                // compare items numerically
                sorter = function (a, b) {
                    return (b - a);
                };
                break;
            case 'SORT_REGULAR':
            // compare items normally (don't change types)
            default:
                sorter = function (b, a) {
                    var aFloat = parseFloat(a),
                        bFloat = parseFloat(b),
                        aNumeric = aFloat + '' === a,
                        bNumeric = bFloat + '' === b;
                    if (aNumeric && bNumeric) {
                        return aFloat > bFloat ? 1 : aFloat < bFloat ? -1 : 0;
                    } else if (aNumeric && !bNumeric) {
                        return 1;
                    } else if (!aNumeric && bNumeric) {
                        return -1;
                    }
                    return a > b ? 1 : a < b ? -1 : 0;
                };
                break;
        }

        // Make a list of key names
        for (k in inputArr) {
            if (inputArr.hasOwnProperty(k)) {
                keys.push(k);
            }
        }
        keys.sort(sorter);

        // BEGIN REDUNDANT
        this.php_js = this.php_js || {};
        this.php_js.ini = this.php_js.ini || {};
        // END REDUNDANT
        strictForIn = this.php_js.ini['phpjs.strictForIn'] && this.php_js.ini['phpjs.strictForIn'].local_value && this.php_js.ini['phpjs.strictForIn'].local_value !== 'off';
        populateArr = strictForIn ? inputArr : populateArr;


        // Rebuild array with sorted key names
        for (i = 0; i < keys.length; i++) {
            k = keys[i];
            tmp_arr[k] = inputArr[k];
            if (strictForIn) {
                delete inputArr[k];
            }
        }
        for (i in tmp_arr) {
            if (tmp_arr.hasOwnProperty(i)) {
                populateArr[i] = tmp_arr[i];
            }
        }

        return strictForIn || populateArr;
    }

    phpJS.prototype.ini_set = function (varname, newvalue) {
        // http://kevin.vanzonneveld.net
        // +   original by: Brett Zamir (http://brett-zamir.me)
        // %        note 1: This will not set a global_value or access level for the ini item
        // *     example 1: ini_set('date.timezone', 'America/Chicago');
        // *     returns 1: 'Asia/Hong_Kong'

        var oldval = '',
            that = this;
        this.php_js = this.php_js || {};
        this.php_js.ini = this.php_js.ini || {};
        this.php_js.ini[varname] = this.php_js.ini[varname] || {};
        oldval = this.php_js.ini[varname].local_value;

        var _setArr = function (oldval) { // Although these are set individually, they are all accumulated
            if (typeof oldval === 'undefined') {
                that.php_js.ini[varname].local_value = [];
            }
            that.php_js.ini[varname].local_value.push(newvalue);
        };

        switch (varname) {
            case 'extension':
                if (typeof this.dl === 'function') {
                    this.dl(newvalue); // This function is only experimental in php.js
                }
                _setArr(oldval, newvalue);
                break;
            default:
                this.php_js.ini[varname].local_value = newvalue;
                break;
        }
        return oldval;
    }

    phpJS.prototype.strtr = function (str, from, to) {
        // http://kevin.vanzonneveld.net
        // +   original by: Brett Zamir (http://brett-zamir.me)
        // +      input by: uestla
        // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
        // +      input by: Alan C
        // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
        // +      input by: Taras Bogach
        // +   bugfixed by: Brett Zamir (http://brett-zamir.me)
        // +      input by: jpfle
        // +   bugfixed by: Brett Zamir (http://brett-zamir.me)
        // -   depends on: krsort
        // -   depends on: ini_set
        // *     example 1: $trans = {'hello' : 'hi', 'hi' : 'hello'};
        // *     example 1: strtr('hi all, I said hello', $trans)
        // *     returns 1: 'hello all, I said hi'
        // *     example 2: strtr('äaabaåccasdeöoo', 'äåö','aao');
        // *     returns 2: 'aaabaaccasdeooo'
        // *     example 3: strtr('ääääääää', 'ä', 'a');
        // *     returns 3: 'aaaaaaaa'
        // *     example 4: strtr('http', 'pthxyz','xyzpth');
        // *     returns 4: 'zyyx'
        // *     example 5: strtr('zyyx', 'pthxyz','xyzpth');
        // *     returns 5: 'http'
        // *     example 6: strtr('aa', {'a':1,'aa':2});
        // *     returns 6: '2'
        var fr = '',
            i = 0,
            j = 0,
            lenStr = 0,
            lenFrom = 0,
            tmpStrictForIn = false,
            fromTypeStr = '',
            toTypeStr = '',
            istr = '';
        var tmpFrom = [];
        var tmpTo = [];
        var ret = '';
        var match = false;

        // Received replace_pairs?
        // Convert to normal from->to chars
        if (typeof from === 'object') {
            tmpStrictForIn = this.ini_set('phpjs.strictForIn', false); // Not thread-safe; temporarily set to true
            from = this.krsort(from);
            this.ini_set('phpjs.strictForIn', tmpStrictForIn);

            for (fr in from) {
                if (from.hasOwnProperty(fr)) {
                    tmpFrom.push(fr);
                    tmpTo.push(from[fr]);
                }
            }

            from = tmpFrom;
            to = tmpTo;
        }

        // Walk through subject and replace chars when needed
        lenStr = str.length;
        lenFrom = from.length;
        fromTypeStr = typeof from === 'string';
        toTypeStr = typeof to === 'string';

        for (i = 0; i < lenStr; i++) {
            match = false;
            if (fromTypeStr) {
                istr = str.charAt(i);
                for (j = 0; j < lenFrom; j++) {
                    if (istr == from.charAt(j)) {
                        match = true;
                        break;
                    }
                }
            } else {
                for (j = 0; j < lenFrom; j++) {
                    if (str.substr(i, from[j].length) == from[j]) {
                        match = true;
                        // Fast forward
                        i = (i + from[j].length) - 1;
                        break;
                    }
                }
            }
            if (match) {
                ret += toTypeStr ? to.charAt(j) : to[j];
            } else {
                ret += str.charAt(i);
            }
        }

        return ret;
    }

    this['phpJS'] = new phpJS();
}).call(this);
(function(){var e=function(){};e.prototype.krsort=function(e,t){var n={},r=[],i,s,o,u=this,a=false,f={};switch(t){case"SORT_STRING":i=function(e,t){return u.strnatcmp(t,e)};break;case"SORT_LOCALE_STRING":var l=this.i18n_loc_get_default();i=this.php_js.i18nLocales[l].sorting;break;case"SORT_NUMERIC":i=function(e,t){return t-e};break;case"SORT_REGULAR":default:i=function(e,t){var n=parseFloat(t),r=parseFloat(e),i=n+""===t,s=r+""===e;if(i&&s){return n>r?1:n<r?-1:0}else if(i&&!s){return 1}else if(!i&&s){return-1}return t>e?1:t<e?-1:0};break}for(o in e){if(e.hasOwnProperty(o)){r.push(o)}}r.sort(i);this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};a=this.php_js.ini["phpjs.strictForIn"]&&this.php_js.ini["phpjs.strictForIn"].local_value&&this.php_js.ini["phpjs.strictForIn"].local_value!=="off";f=a?e:f;for(s=0;s<r.length;s++){o=r[s];n[o]=e[o];if(a){delete e[o]}}for(s in n){if(n.hasOwnProperty(s)){f[s]=n[s]}}return a||f};e.prototype.ini_set=function(e,t){var n="",r=this;this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};this.php_js.ini[e]=this.php_js.ini[e]||{};n=this.php_js.ini[e].local_value;var i=function(n){if(typeof n==="undefined"){r.php_js.ini[e].local_value=[]}r.php_js.ini[e].local_value.push(t)};switch(e){case"extension":if(typeof this.dl==="function"){this.dl(t)}i(n,t);break;default:this.php_js.ini[e].local_value=t;break}return n};e.prototype.strtr=function(e,t,n){var r="",i=0,s=0,o=0,u=0,a=false,f="",l="",c="";var h=[];var p=[];var d="";var v=false;if(typeof t==="object"){a=this.ini_set("phpjs.strictForIn",false);t=this.krsort(t);this.ini_set("phpjs.strictForIn",a);for(r in t){if(t.hasOwnProperty(r)){h.push(r);p.push(t[r])}}t=h;n=p}o=e.length;u=t.length;f=typeof t==="string";l=typeof n==="string";for(i=0;i<o;i++){v=false;if(f){c=e.charAt(i);for(s=0;s<u;s++){if(c==t.charAt(s)){v=true;break}}}else{for(s=0;s<u;s++){if(e.substr(i,t[s].length)==t[s]){v=true;i=i+t[s].length-1;break}}}if(v){d+=l?n.charAt(s):n[s]}else{d+=e.charAt(i)}}return d};this["phpJS"]=new e}).call(this);Object.size=function(e){var t=0,n;for(n in e){if(e.hasOwnProperty(n))t++}return t};var UrlManager=function(){var e="get";var t="path";var n=function(t){this.opts={rules:{},urlSuffix:"",showScriptName:true,appendParams:true,routeVar:"r",caseSensitive:true,matchValue:false,useStrictParsing:true,urlFormat:e};for(var n in t){this.opts[n]=t[n]}this._rules=[];this.processRules()};n.prototype.processRules=function(){if(Object.size(this.opts.rules)===0||this.urlFormat===e){return}for(var t in this.opts.rules){var n=this.opts.rules[t];this._rules.push(this.createUrlRule(n,t))}};n.prototype.addRules=function(e,t){t=typeof t!=="undefined"?t:true;if(t){for(var n in this.opts.rules){var r=this.opts.rules[n];this._rules.push(this.createUrlRule(r,n))}}else{e.reverse();for(var n in this.opts.rules){var r=this.opts.rules[n];this._rules.unshift(this.createUrlRule(r,n))}}};n.prototype.createUrl=function(e,t,n){t=t||[];n=n||"&";t=JSON.parse(JSON.stringify(t));delete t[this.opts.routeVar];for(var r in t){var i=t[r];if(i===null){t[r]=""}}var s="";if("#"in t){s="#"+t["#"];delete t["#"]}e=e.replace(/\/+$/,"");for(var r in this._rules){var o=this._rules[r];var u=o.createUrl(this,e,t,n);if(u!==false){if(o.hasHostInfo){return u===""?"/"+s:u+s}else{return this.getBaseUrl()+"/"+u+s}}}return this.createUrlDefault(e,t,n)+s};n.prototype.createUrlDefault=function(e,n,r){if(this.opts.urlFormat===t){var i=this.getBaseUrl()+"/"+e+"/";i=i.replace(/\/+$/,"");if(this.opts.appendParams){var s=i+"/"+this.createPathInfo(n,"/","/");i=s.replace(/\/+$/,"");return e===""?i:i+this.opts.urlSuffix}else{if(e!==""){i+=this.opts.urlSuffix}var o=this.createPathInfo(n,"=",r);return o===""?i:i+"?"+o}}else{var i=this.getBaseUrl();var o=this.createPathInfo(n,"=",r);if(!this.opts.showScriptName){i+="/"}if(e!==""){i+="?"+this.opts.routeVar+"="+e;if(o!==""){i+=r+o}}else if(o!==""){i+="?"+o}return i}};n.prototype.createPathInfo=function(e,t,n,r){r=r||null;var i=[];for(var s in e){var o=e[s];if(r!==null){s=r+"["+s+"]"}if(Object.prototype.toString.call(o)==="[object Array]"){i.push(this.createPathInfo(o,t,n,s))}else{i.push(encodeURIComponent(s)+t+encodeURIComponent(o))}}return i.join(n)};n.prototype.createUrlRule=function(e,t){return new UrlRule(e,t)};n.prototype.getBaseUrl=function(){return this.opts.showScriptName?Yii.app.scriptUrl:Yii.app.baseUrl};return n}.call(this);var UrlRule=function(){var e=function(e,t){this.references={};this.params={};this.caseSensitive=null;this.routePattern=null;this.defaultParams={};this.matchValue=null;this.urlSuffix=null;this.matchValue=null;this.verb=null;this.routePatternGroups=[];if(typeof e==="object"){var n=["urlSuffix","caseSensitive","defaultParams","matchValue","verb","parsingOnly"];for(var r in n){var i=n[r];if(i in e){this[i]=e[i]}}if("pattern"in e){t=e["pattern"]}e=e[0]}var s={};s["/"]="\\/";this.route=e.replace(/\/+$/,"");if(e.indexOf("<")!==-1){var o=/<(\w+)>/g;var u=o.exec(e);while(u!==null){var i=u[1];this.references[i]="<"+i+">";u=o.exec(e)}}this.hasHostInfo=t.substring(0,7)==="http://"||t.substring(0,8)==="https://";var a=/<(\w+):?(.*?)?>/g;var f=a.exec(t);var l=0;while(f!==null){var i=f[1];var c=f[2];if(c===""||c===void 0){c="[^/]+"}if(i in this.references){s["<"+i+">"]="(?P<"+i+">"+c+")"}else{this.params[i]=c}f=a.exec(t)}var h=t.replace(/\*+$/,"");this.append=h!==t;h=h.replace(/^\/|\/$/g,"");this.template=h.replace(/<(\w+):?.*?>/g,"<$1>");if(this.references!=={}){this.routePattern="^"+phpJS.strtr(this.route,s)+"$";var p=/\(\?P<(\w+)>.*?\)/g;var d=p.exec(this.routePattern);var v=0;while(d!=null){this.routePatternGroups[d[1]]=v;v++;d=p.exec(this.routePattern)}this.routePattern=this.routePattern.replace(/\(\?P<\w+>(.*?)\)/g,"($1)");this.routePattern=this.routePattern.replace(/([^\\])([\+\*])/g,"$1$2?");this.routePattern=this.routePattern.replace(/\(\((.*?)\)\)/g,"($1)")}};e.prototype.createUrl=function(e,t,n,r){var i="";if(e.opts.caseSensitive&&this.caseSensitive===null||this.caseSensitive){i="i"}var s={};if(t!==this.route){if(this.routePattern!==null){var o=new RegExp(this.routePattern,i);var u=t.match(o);if(u!==null){for(var a in this.references){var f=this.references[a];var l=this.routePatternGroups[a];s[f]=u[l+1]}}else{return false}}else{return false}}for(var a in this.defaultParams){var c=this.defaultParams[a];if(a in n){if(n[a]==c){delete n[a]}else{return false}}}for(var a in this.params){if(!(a in n)){return false}}if(e.opts.matchValue&&this.matchValue===null||this.matchValue){for(var a in this.params){var c=this.params[a];var h=""+n[a];if(h.match(new RegExp("^"+c+"$",i))===null){return false}}}for(var a in this.params){s["<"+a+">"]=encodeURIComponent(n[a]);delete n[a]}var p=this.urlSuffix===null?e.opts.urlSuffix:this.urlSuffix;var d=phpJS.strtr(this.template,s);if(this.hasHostInfo){var v=Yii.app.hostInfo.toLowerCase();if(d.toLowerCase().indexOf(v)===0){d=d.substring(v.length)}}if(Object.size(n)===0){return d!==""?d+p:d}if(this.append){d+="/"+e.createPathInfo(n,"/","/")+p}else{if(d!==""){d+=p}d+="?"+e.createPathInfo(n,"=",r)}return d};return e}.call(this)